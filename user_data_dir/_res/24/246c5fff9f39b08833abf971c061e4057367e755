{"title": "How to enable ES6 (and beyond) syntax with Node and Express", "byline": "Jonathan Cunanan", "dir": null, "lang": "en", "content": "<div class=\"page\" id=\"readability-page-1\"><div id=\"site-main\">\n<article><h1>How to enable ES6 (and beyond) syntax with Node and Express</h1>\n<section>\n<section data-test-label=\"post-content\">\n<p>Have you ever tried to write front-end apps using ES6 syntax, but then \u00a0when you decided to learn back-end development with Node.js and Express, \u00a0you realized that you can\u2019t use stuff like <code>import from</code> and \u00a0<code>export default</code>? \u00a0If so, you came to the right place! This is step by step guide on how \u00a0to configure your dev and prod environments, setup scripts, and as a \u00a0bonus we\u2019ll learn how to add tests!</p><h3 id=\"table-of-contents-summary-of-topics\">Table of Contents / Summary of topics</h3><ul><li><a href=\"#how-does-it-work-a-high-level-view-of-what-we-need\">How does it work?</a></li><li><a href=\"#prerequisites\">Prerequisites</a></li><li><a href=\"#installing-express\">Installing express</a></li><li><a href=\"#setting-up-scripts\">Setting up scripts</a></li><li><a href=\"#bonus-add-tests-\">Bonus</a></li><li><a href=\"#tl-dr\">TL;DR</a></li></ul><h3 id=\"how-does-it-work-a-high-level-view-of-what-we-need\">How does it work? A high level view of what we need</h3><p>To enable a front-end development-like experience while developing back-end apps, here\u2019s a high level view of the processes happening to your project.</p><h4 id=\"code-transpiler-from-es6-to-es5\">Code Transpiler from ES6+ to ES5</h4><p>We need a package that translates ES6 and above syntax to ES5 code. ES5 code is the JS syntax style that is readable to node.js, such as <code>module.exports</code> or <code>var module = require('module')</code> . Note that in today\u2019s time, almost 99% of ES6+ syntax can be used in Node.js. This is where the package called <a href=\"https://babeljs.io/\" rel=\"noopener\"><em>babel</em></a> shines.</p><p>Babel takes a js file, converts the code in it, and outputs into a new file.</p><h4 id=\"script-that-removes-files\">Script that removes files</h4><p>Whenever we change something in our code, we feed it to the transpiler, and it outputs a fresh copy every-time. That\u2019s why we need a script that removes files before the fresh transpiled copy enters. And for that, there\u2019s an existing package called <a href=\"https://www.npmjs.com/package/rimraf\" rel=\"noopener\">rimraf</a>. Rimraf deletes files. We\u2019ll demonstrate that later.</p><h4 id=\"watcher-of-file-changes\">Watcher of file changes</h4><p>When coding in Node.js, automatic restart of our server doesn\u2019t come out of the box just like when doing a project made on-top of create-react-app or vue-cli. That\u2019s why we\u2019ll install a package called <a href=\"https://www.npmjs.com/package/nodemon\" rel=\"noopener\">nodemon,</a> that executes something whenever we change a file in our code. We can leverage nodemon to restart our server every-time a file is changed.</p><p>So that\u2019s the high-level view of how it works under the hood. With that, let\u2019s start on how should we setup or project.</p><h3 id=\"prerequisites\">Prerequisites</h3><p>Before we begin, we need some things setup first.</p><ol><li>Make sure you have Node.js and npm installed. I recommend installing their latest LTS or current stable version. You can install it via <a href=\"https://nodejs.org/en/download/\" rel=\"noopener\">Node.js Source</a> or <a href=\"https://github.com/creationix/nvm\" rel=\"noopener\">NVM</a> (Node Version Manager)</li><li>Basic knowledge of terminal commands. Most of the commands are in the tutorial anyway so you don\u2019t have to worry about them.</li><li>Make sure you have your terminal open and your favorite text editor installed.</li></ol><p>That\u2019s it, we\u2019re good to go!</p><h3 id=\"installing-express\">Installing Express</h3><p>Using the Express generator, we will create a new project with generated code, move some files, and convert some code to ES6 syntax. We need to convert it at this early stage because we need a way to verify if our ES6 code works.</p><h4 id=\"project-setup\">Project Setup</h4><p>Run this command in your terminal. You can name <code>your-project-name</code> with the name you like. <code>--no-view</code> flag means that we won\u2019t be using any templating engine such as handlebars, ejs, or pug, for our skeleton Express app.</p><p><code>npx express-generator your-project-name --no-view</code></p><p>After creating your app, you need to go to your app directory. For Windows Powershell and Linux terminals, use:</p><p><code>cd your-project-name</code></p><p>Next, open the text editor you like. For me, I just use VSCode so I just have my terminal and text editor open at the same time. But you can use any text editor you want.</p><h4 id=\"installing-packages-and-moving-and-deleting-files\">Installing Packages and Moving and Deleting Files</h4><p>After we have the generated project ready, we need to <code>install</code> the dependencies and move some folders. Run this command to install Express and other packages.</p><p>npm install</p><p>While you\u2019re waiting for the dependencies to install, follow these steps.</p><ul><li>create a <code>server/</code> folder</li><li>Put <code>bin/</code> , <code>app.js</code> , and <code>routes/</code> inside the <code>server/</code> folder.</li><li>Rename <code>www</code>, found in <code>bin</code> to <code><a href=\"http://www.js/\" rel=\"noopener\">www.js</a></code></li><li>Leave <code>public/</code> folder at your project root.</li></ul><p>Your file structure will look like this:</p><figure><img alt=\"image\" height=\"464\" loading=\"lazy\" src=\"https://www.freecodecamp.org/news/content/images/2020/02/image.png\" width=\"800\"/><figcaption>This is how our file structure looks like. `public/` folder is at the root, and all the `.js` files are inside `server/` folder.</figcaption></figure><p>Now, because we modified the file structure, our start server script won\u2019t work. But we\u2019ll fix it along the way.</p><h4 id=\"converting-to-es6-code\">Converting to ES6 code</h4><p>Converting the generated code to ES6 is a little bit tedious, so I\u2019ll just post the code here and feel free to copy and paste it.</p><p>Code for <code>bin/www.js</code>:</p><p>Now, because we modified the file structure, our start server script won\u2019t work. Here\u2019s what we\u2019ll do to fix it. On your package.json file, rename start script to <code>server</code>found in a JSON Object called <code>\"scripts\"</code></p><pre tabindex=\"0\"><code>// package.json\n{\n  \"name\": \"your-project-name\",\n  // ....other details\n  \"scripts\": {\n    \"server\": \"node ./server/bin/www\"\n  }\n}</code></pre><p>You\u2019ll see that we changed the file path from <code>./bin/www</code>to <code>./server/bin/www</code> because we moved files to <code>server/</code>. We\u2019ll use start script later on.</p><p>Try it! Try running the server by typing <code>npm run server</code> on your terminal, and go to <code>localhost:3000</code> on your browser.</p><h4 id=\"converting-the-top-level-code-to-use-es6-imports\">Converting the top level code to use ES6 imports</h4><p>Converting the generated code to ES6 is a little bit tedious, so I\u2019ll just post the code here and feel free to copy and paste it.</p><p>Code for <code>bin/www.js</code>:</p><pre tabindex=\"0\"><code>// bin/www.js\n/**\n * Module dependencies.\n */\nimport app from '../app';\nimport debugLib from 'debug';\nimport http from 'http';\nconst debug = debugLib('your-project-name:server');\n// ..generated code below.</code></pre><p>Almost all of our modifications are only at the top and bottom of the files. We are leaving other generated code as is.</p><p>Code for <code>routes/index.js </code>and <code>routes/users.js</code>:</p><pre tabindex=\"0\"><code>// routes/index.js and users.js\nimport express from 'express';\nvar router = express.Router();\n// ..stuff below\nexport default router;</code></pre><p>Code for <code>app.js</code>:</p><pre tabindex=\"0\"><code>// app.js\nimport express from 'express';\nimport path from 'path';\nimport cookieParser from 'cookie-parser';\nimport logger from 'morgan';\nimport indexRouter from './routes/index';\nimport usersRouter from './routes/users';\nvar app = express();\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, '../public')));\napp.use('/', indexRouter);\napp.use('/users', usersRouter);\nexport default app;</code></pre><p>In <code>app.js</code> , because we left <code>public/</code> at the project root , we need to change the Express static path one folder up. Notice that the path <code>'public'</code> became <code>'../public'</code> .</p><p><code>app.use(express.static(path.join(__dirname, '../public')));</code></p><p>Okay we\u2019re done with converting the code! Let\u2019s setup our scripts now.</p><h3 id=\"setting-up-scripts\">Setting up Scripts</h3><p>In setting up scripts, each script performs a different role. And we reuse each npm script. And for our development and production environments, they have a different configuration. (Almost identical, you\u2019ll see later) That\u2019s why we need to compose our scripts so we can use them without repeatedly typing the same stuff all over again.</p><h4 id=\"install-npm-run-all-\">Install `npm-run-all`</h4><p>Since some terminal commands won\u2019t work on windows cmd, we need to install a package called <code>npm-run-all</code> so this script will work for any environment. Run this command in your terminal project root.</p><p><code>npm install --save npm-run-all</code></p><h4 id=\"install-babel-nodemon-and-rimraf\">Install babel, nodemon, and rimraf</h4><p>Babel is modern JavaScript transpiler. A transpiler means your modern JavaScript code will be transformed to an older format that Node.js can understand. Run this command in your terminal project root. We will be using the latest version of babel (Babel 7+).</p><p>Note that Nodemon is our file watcher and Rimraf is our file remover packages.</p><p><code>npm install --save <a href=\"http://twitter.com/babel/core\" rel=\"noopener\">@babel/core</a> <a href=\"http://twitter.com/babel/cli\" rel=\"noopener\">@babel/cli</a> <a href=\"http://twitter.com/babel/preset-env\" rel=\"noopener\">@babel/preset-env</a> nodemon rimraf</code></p><h4 id=\"adding-transpile-script\">Adding transpile script</h4><p>Before babel starts converting code, we need to tell it which parts of the code to translate. Note that there are a lots of configuration available, because babel can convert a lot of JS Syntaxes for every different kinds of purpose. Luckily we don\u2019t need to think about that because there\u2019s an available default for that. We are using default config called as preset-env (the one we installed earlier) in our package.json file to tell Babel in which format we are transpiling the code.</p><p>Inside your <code>package.json</code> file, create a <code>\"babel\"</code> object and put this setting.</p><pre><code>// package.json\n{  \n  // .. contents above\n  \"babel\": {\n    \"presets\": [\"@babel/preset-env\"]\n  },\n}</code></pre><p>After this setup we are now ready to test if babel really converts code. Add a script named transpile in your <code>package.json</code>:</p><pre><code>// package.json\n\"scripts\": {\n    \"start\": \"node ./server/bin/www\",\n    \"transpile\": \"babel ./server --out-dir dist-server\",\n}</code></pre><p>Now what happened here? First we need to run the cli command <code>babel</code> , specify the files to convert, in this case, the files in <code>server/</code> and put the transpiled contents in a different folder called <code>dist-server</code> in our project root.</p><p>You can test it by running this command</p><p><code>npm run transpile</code></p><p>You\u2019ll see a new folder pop up.</p><figure><img alt=\"image-1\" height=\"332\" loading=\"lazy\" src=\"https://www.freecodecamp.org/news/content/images/2020/02/image-1.png\" width=\"800\"/><figcaption>New folder popped up called dist-server because of the script we ran.</figcaption></figure><p>Yay it worked! \u2705 As you can see, there\u2019s a folder that has the same folder structure as our server folder but with converted code inside. Pretty cool right? Next step is to run try if our server is running!</p><h4 id=\"clean-script\">Clean script</h4><p>To have a fresh copy every-time we transpile code into new files, we need a script that removes old files. Add this script to your package.json</p><pre><code>\"scripts\": {\n  \"server\": \"node ./dist-server/bin/www\",\n  \"transpile\": \"babel ./server --out-dir dist-server\",\n  \"clean\": \"rimraf dist-server\"\n}</code></pre><p>This npm script that we made means it removes the folder <code>dist-server/</code></p><p>Now to combine transpile and clean, add a script called <code>build</code> , which combines the two processes.</p><pre><code>// scripts\n\"build\": \"npm-run-all clean transpile\"</code></pre><h4 id=\"running-dev-script\">Running dev script</h4><p>Now we have a build script, we need to run our dev server. We\u2019ll add a script called <code>dev</code> in our package.json. This takes care of setting our Node Environment to \u201cdevelopment\u201d, removing old transpiled code, and replacing it with a new one.</p><pre><code>\"scripts\": {\n  \"build\": \"npm-run-all clean transpile\"\n  \"server\": \"node ./dist-server/bin/www\",\n  \"dev\": \"NODE_ENV=development npm-run-all build server\",\n  \"transpile\": \"babel ./server --out-dir dist-server\",\n  \"clean\": \"rimraf dist-server\"\n}</code></pre><p>Note here that we\u2019ve changed again the file we are running on our server script. We\u2019re running the file-path with the transpiled code, found in <code>dist-server/</code>.</p><h4 id=\"adding-prod-scripts\">Adding prod scripts</h4><p>If we have a dev script that sets the Node Environment to development, we have a <code>prod</code> script that sets it to \u201cproduction.\u201d We use this configuration when we are deploying. (Heroku, AWS, DigitalOcean, etc..) We\u2019re now adding again our start script and prod script in our package.json again.</p><pre><code>\"scripts\": {\n  \"start\": \"npm run prod\"\n  \"build\": \"npm-run-all clean transpile\"\n  \"server\": \"node ./dist-server/bin/www\",\n  \"dev\": \"NODE_ENV=development npm-run-all build server\",\n  \"prod\": \"NODE_ENV=production npm-run-all build server\",\n  \"transpile\": \"babel ./server --out-dir dist-server\",\n  \"clean\": \"rimraf dist-server\"\n}</code></pre><p>We set <code>start</code> script default to prod because start script is being used always by deployment platforms like AWS or Heroku to start a server.</p><p>Try either by running <code>npm start</code> or <code>npm run prod</code> .</p><pre><code>// package.json\n...\n\"nodemonConfig\": { \n  \"exec\": \"npm run dev\",\n  \"watch\": [\"server/*\", \"public/*\"],\n  \"ignore\": [\"**/__tests__/**\", \"*.test.js\", \"*.spec.js\"]\n},\n\"scripts\": { \n  // ... other scripts\n  \"watch:dev\": \"nodemon\"\n}</code></pre><h4 id=\"how-about-auto-restarting-the-server-whenever-a-file-change\">How about auto-restarting the server whenever a file change?</h4><p>One final script, in order to complete our development setup. We need to add a file watcher script that runs a command whenever a change is made in a file. Add a JSON Object named \u201cnodemonConfig\u201d in your package.json. This is where we store what we tell the watcher what to do when a file changes.</p><p>Also, add a script called <code>watch:dev</code> in your package.json</p><pre><code>// package.json\n...\n\"nodemonConfig\": { \n  \"exec\": \"npm run dev\",\n  \"watch\": [\"server/*\", \"public/*\"],\n  \"ignore\": [\"**/__tests__/**\", \"*.test.js\", \"*.spec.js\"]\n},\n\"scripts\": { \n  // ... other scripts\n  \"watch:dev\": \"nodemon\"\n}</code></pre><p>Nodemon config contains settings related to</p><ul><li>Which command to run whenever a file changes, in our case <code>npm run dev</code></li><li>What folders and files to watch</li><li>And which files to ignore</li></ul><p>More about configuration of nodemon <a href=\"https://github.com/remy/nodemon#config-files\" rel=\"noopener\">here</a>.</p><p>Now that we have our file watcher, you can now just run <code>npm run watch:dev</code> , code, and save your file. and whenever you go to <code>localhost:3000</code> , you\u2019ll see the changes. Try it out!</p><h3 id=\"bonus-add-tests-\">Bonus: Add tests!</h3><p>To add tests in our project, simply install <a href=\"https://www.npmjs.com/package/jest\" rel=\"noopener\">Jest</a> from npm, add a few config, and add a script called <code>test</code> in our package.json</p><p><code>npm i -D jest</code></p><p>Add an object called \u201cjest\u201d, and a test script in your package.json</p><pre><code>// package.json\n...\n\"jest\": { \n  \"testEnvironment\": \"node\"\n},\n\"scripts\": {\n  // ..other scripts \n  \"test\": \"jest\"\n}</code></pre><p>Try it out, make a file sample.test.js, write any tests, and run the script!</p><p><code>npm run test</code></p><figure><img alt=\"image-2\" height=\"189\" loading=\"lazy\" src=\"https://www.freecodecamp.org/news/content/images/2020/02/image-2.png\" width=\"428\"/><figcaption>Sample Screenshot of running npm run test.</figcaption></figure><h3 id=\"tl-dr\">TL;DR</h3><p>Here are the simplified steps for how to enable ES6 in Node.js. I\u2019ll also include the repo so you can copy and inspect the whole code.</p><ul><li>Make a new project using <code>express your-project-name</code> terminal command.</li><li>Move the <code>bin/</code>, <code>routes/ </code>and <code>app</code> into a new folder called <code>src/</code> , and convert the code into ES6. Also don\u2019t forget to rename <code>bin/www</code> to <code><a href=\"http://www.js/\" rel=\"noopener\">www.js</a></code></li><li>Install all the dependencies and devDependencies</li></ul><pre><code>npm i npm-run-all @babel/cli @babel/core @babel/preset-env nodemon rimraf --save\nnpm i -D jest</code></pre><ul><li>Add these scripts to your package.json</li></ul><pre tabindex=\"0\"><code>\"scripts\": { \n  \"start\": \"npm run prod\", \n  \"build\": \"npm-run-all clean transpile\", \n  \"server\": \"node ./dist-server/bin/www\", \n  \"dev\": \"NODE_ENV=development npm-run-all build server\", \n  \"prod\": \"NODE_ENV=production npm-run-all build server\", \n  \"transpile\": \"babel ./server --out-dir dist-server\", \n  \"clean\": \"rimraf dist-server\", \n  \"watch:dev\": \"nodemon\", \n  \"test\": \"jest\" \n}</code></pre><ul><li>Put configurations for babel, nodemon, and jest in your package.json</li></ul><pre tabindex=\"0\"><code>\"nodemonConfig\": {\n  \"exec\": \"npm run dev\",\n  \"watch\": [ \"server/*\", \"public/*\" ],\n  \"ignore\": [ \"**/__tests__/**\", \"*.test.js\", \"*.spec.js\" ] \n}, \n\"babel\": { \n  \"presets\": [ \"@babel/preset-env\" ]\n},\n\"jest\": {\n  \"testEnvironment\": \"node\"\n},</code></pre><ul><li>Test your scripts by running <code>npm run your-script-here</code></li><li>You\u2019ll see the<a href=\"https://github.com/jcunanan05/express-es6-sample/tree/master\" rel=\"noopener\"> complete repo at my github</a></li></ul><h3 id=\"notes-and-disclaimers\">Notes and disclaimers</h3><p>Note that this setup may not be proved ideal for all situations, specially for big projects. (like 1k files of code). Transpiling step and deleting might slow down your development environment. Plus, ES Modules, is almost coming to node. But, nevertheless, this is a good eductational material to understand how transipiling runs under the hood like when we are developing front-end apps :)</p><h3 id=\"conclusion\">Conclusion</h3><p>All right! I hope you learned a lot. Thank you for reading this far.</p><p>Happy Coding!</p><p><a href=\"https://github.com/jcunanan05/express-es6-sample/tree/master\" rel=\"noopener\">Check the full repo here.</a></p><p>This article is published in freeCodecamp news.</p><p><a href=\"https://twitter.com/devJonathanC_\">? Twitter</a> - <a href=\"https://www.freecodecamp.org/jcunanan05\">? freeCodeCamp </a>- \u00a0<a href=\"https://jonathancunanan.com/\">? Portfolio</a> - <a href=\"https://github.com/jcunanan05\">\u269b\ufe0f Github</a></p>\n</section>\n<hr/>\n<hr/>\n<p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n</p>\n</section>\n</article>\n</div></div>", "textContent": "\n            \n                \n                \n                \n                    \n                \n                \n                    \n                            \nHave you ever tried to write front-end apps using ES6 syntax, but then \u00a0when you decided to learn back-end development with Node.js and Express, \u00a0you realized that you can\u2019t use stuff like import from and \u00a0export default? \u00a0If so, you came to the right place! This is step by step guide on how \u00a0to configure your dev and prod environments, setup scripts, and as a \u00a0bonus we\u2019ll learn how to add tests!Table of Contents / Summary of topicsHow does it work?PrerequisitesInstalling expressSetting up scriptsBonusTL;DRHow does it work? A high level view of what we needTo enable a front-end development-like experience while developing back-end apps, here\u2019s a high level view of the processes happening to your project.Code Transpiler from ES6+ to ES5We need a package that translates ES6 and above syntax to ES5 code. ES5 code is the JS syntax style that is readable to node.js, such as module.exports or var module = require('module') . Note that in today\u2019s time, almost 99% of ES6+ syntax can be used in Node.js. This is where the package called babel shines.Babel takes a js file, converts the code in it, and outputs into a new file.Script that removes filesWhenever we change something in our code, we feed it to the transpiler, and it outputs a fresh copy every-time. That\u2019s why we need a script that removes files before the fresh transpiled copy enters. And for that, there\u2019s an existing package called rimraf. Rimraf deletes files. We\u2019ll demonstrate that later.Watcher of file changesWhen coding in Node.js, automatic restart of our server doesn\u2019t come out of the box just like when doing a project made on-top of create-react-app or vue-cli. That\u2019s why we\u2019ll install a package called nodemon, that executes something whenever we change a file in our code. We can leverage nodemon to restart our server every-time a file is changed.So that\u2019s the high-level view of how it works under the hood. With that, let\u2019s start on how should we setup or project.PrerequisitesBefore we begin, we need some things setup first.Make sure you have Node.js and npm installed. I recommend installing their latest LTS or current stable version. You can install it via Node.js Source or NVM (Node Version Manager)Basic knowledge of terminal commands. Most of the commands are in the tutorial anyway so you don\u2019t have to worry about them.Make sure you have your terminal open and your favorite text editor installed.That\u2019s it, we\u2019re good to go!Installing ExpressUsing the Express generator, we will create a new project with generated code, move some files, and convert some code to ES6 syntax. We need to convert it at this early stage because we need a way to verify if our ES6 code works.Project SetupRun this command in your terminal. You can name your-project-name with the name you like. --no-view flag means that we won\u2019t be using any templating engine such as handlebars, ejs, or pug, for our skeleton Express app.npx express-generator your-project-name --no-viewAfter creating your app, you need to go to your app directory. For Windows Powershell and Linux terminals, use:cd your-project-nameNext, open the text editor you like. For me, I just use VSCode so I just have my terminal and text editor open at the same time. But you can use any text editor you want.Installing Packages and Moving and Deleting FilesAfter we have the generated project ready, we need to install the dependencies and move some folders. Run this command to install Express and other packages.npm installWhile you\u2019re waiting for the dependencies to install, follow these steps.create a server/ folderPut bin/ , app.js , and routes/ inside the server/ folder.Rename www, found in bin to www.jsLeave public/ folder at your project root.Your file structure will look like this:This is how our file structure looks like. `public/` folder is at the root, and all the `.js` files are inside `server/` folder.Now, because we modified the file structure, our start server script won\u2019t work. But we\u2019ll fix it along the way.Converting to ES6 codeConverting the generated code to ES6 is a little bit tedious, so I\u2019ll just post the code here and feel free to copy and paste it.Code for bin/www.js:Now, because we modified the file structure, our start server script won\u2019t work. Here\u2019s what we\u2019ll do to fix it. On your package.json file, rename start script to serverfound in a JSON Object called \"scripts\"// package.json\n{\n  \"name\": \"your-project-name\",\n  // ....other details\n  \"scripts\": {\n    \"server\": \"node ./server/bin/www\"\n  }\n}You\u2019ll see that we changed the file path from ./bin/wwwto ./server/bin/www because we moved files to server/. We\u2019ll use start script later on.Try it! Try running the server by typing npm run server on your terminal, and go to localhost:3000 on your browser.Converting the top level code to use ES6 importsConverting the generated code to ES6 is a little bit tedious, so I\u2019ll just post the code here and feel free to copy and paste it.Code for bin/www.js:// bin/www.js\n/**\n * Module dependencies.\n */\nimport app from '../app';\nimport debugLib from 'debug';\nimport http from 'http';\nconst debug = debugLib('your-project-name:server');\n// ..generated code below.Almost all of our modifications are only at the top and bottom of the files. We are leaving other generated code as is.Code for routes/index.js and routes/users.js:// routes/index.js and users.js\nimport express from 'express';\nvar router = express.Router();\n// ..stuff below\nexport default router;Code for app.js:// app.js\nimport express from 'express';\nimport path from 'path';\nimport cookieParser from 'cookie-parser';\nimport logger from 'morgan';\nimport indexRouter from './routes/index';\nimport usersRouter from './routes/users';\nvar app = express();\napp.use(logger('dev'));\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\napp.use(cookieParser());\napp.use(express.static(path.join(__dirname, '../public')));\napp.use('/', indexRouter);\napp.use('/users', usersRouter);\nexport default app;In app.js , because we left public/ at the project root , we need to change the Express static path one folder up. Notice that the path 'public' became '../public' .app.use(express.static(path.join(__dirname, '../public')));Okay we\u2019re done with converting the code! Let\u2019s setup our scripts now.Setting up ScriptsIn setting up scripts, each script performs a different role. And we reuse each npm script. And for our development and production environments, they have a different configuration. (Almost identical, you\u2019ll see later) That\u2019s why we need to compose our scripts so we can use them without repeatedly typing the same stuff all over again.Install `npm-run-all`Since some terminal commands won\u2019t work on windows cmd, we need to install a package called npm-run-all so this script will work for any environment. Run this command in your terminal project root.npm install --save npm-run-allInstall babel, nodemon, and rimrafBabel is modern JavaScript transpiler. A transpiler means your modern JavaScript code will be transformed to an older format that Node.js can understand. Run this command in your terminal project root. We will be using the latest version of babel (Babel 7+).Note that Nodemon is our file watcher and Rimraf is our file remover packages.npm install --save @babel/core @babel/cli @babel/preset-env nodemon rimrafAdding transpile scriptBefore babel starts converting code, we need to tell it which parts of the code to translate. Note that there are a lots of configuration available, because babel can convert a lot of JS Syntaxes for every different kinds of purpose. Luckily we don\u2019t need to think about that because there\u2019s an available default for that. We are using default config called as preset-env (the one we installed earlier) in our package.json file to tell Babel in which format we are transpiling the code.Inside your package.json file, create a \"babel\" object and put this setting.// package.json\n{  \n  // .. contents above\n  \"babel\": {\n    \"presets\": [\"@babel/preset-env\"]\n  },\n}After this setup we are now ready to test if babel really converts code. Add a script named transpile in your package.json:// package.json\n\"scripts\": {\n    \"start\": \"node ./server/bin/www\",\n    \"transpile\": \"babel ./server --out-dir dist-server\",\n}Now what happened here? First we need to run the cli command babel , specify the files to convert, in this case, the files in server/ and put the transpiled contents in a different folder called dist-server in our project root.You can test it by running this commandnpm run transpileYou\u2019ll see a new folder pop up.New folder popped up called dist-server because of the script we ran.Yay it worked! \u2705 As you can see, there\u2019s a folder that has the same folder structure as our server folder but with converted code inside. Pretty cool right? Next step is to run try if our server is running!Clean scriptTo have a fresh copy every-time we transpile code into new files, we need a script that removes old files. Add this script to your package.json\"scripts\": {\n  \"server\": \"node ./dist-server/bin/www\",\n  \"transpile\": \"babel ./server --out-dir dist-server\",\n  \"clean\": \"rimraf dist-server\"\n}This npm script that we made means it removes the folder dist-server/Now to combine transpile and clean, add a script called build , which combines the two processes.// scripts\n\"build\": \"npm-run-all clean transpile\"Running dev scriptNow we have a build script, we need to run our dev server. We\u2019ll add a script called dev in our package.json. This takes care of setting our Node Environment to \u201cdevelopment\u201d, removing old transpiled code, and replacing it with a new one.\"scripts\": {\n  \"build\": \"npm-run-all clean transpile\"\n  \"server\": \"node ./dist-server/bin/www\",\n  \"dev\": \"NODE_ENV=development npm-run-all build server\",\n  \"transpile\": \"babel ./server --out-dir dist-server\",\n  \"clean\": \"rimraf dist-server\"\n}Note here that we\u2019ve changed again the file we are running on our server script. We\u2019re running the file-path with the transpiled code, found in dist-server/.Adding prod scriptsIf we have a dev script that sets the Node Environment to development, we have a prod script that sets it to \u201cproduction.\u201d We use this configuration when we are deploying. (Heroku, AWS, DigitalOcean, etc..) We\u2019re now adding again our start script and prod script in our package.json again.\"scripts\": {\n  \"start\": \"npm run prod\"\n  \"build\": \"npm-run-all clean transpile\"\n  \"server\": \"node ./dist-server/bin/www\",\n  \"dev\": \"NODE_ENV=development npm-run-all build server\",\n  \"prod\": \"NODE_ENV=production npm-run-all build server\",\n  \"transpile\": \"babel ./server --out-dir dist-server\",\n  \"clean\": \"rimraf dist-server\"\n}We set start script default to prod because start script is being used always by deployment platforms like AWS or Heroku to start a server.Try either by running npm start or npm run prod .// package.json\n...\n\"nodemonConfig\": { \n  \"exec\": \"npm run dev\",\n  \"watch\": [\"server/*\", \"public/*\"],\n  \"ignore\": [\"**/__tests__/**\", \"*.test.js\", \"*.spec.js\"]\n},\n\"scripts\": { \n  // ... other scripts\n  \"watch:dev\": \"nodemon\"\n}How about auto-restarting the server whenever a file change?One final script, in order to complete our development setup. We need to add a file watcher script that runs a command whenever a change is made in a file. Add a JSON Object named \u201cnodemonConfig\u201d in your package.json. This is where we store what we tell the watcher what to do when a file changes.Also, add a script called watch:dev in your package.json// package.json\n...\n\"nodemonConfig\": { \n  \"exec\": \"npm run dev\",\n  \"watch\": [\"server/*\", \"public/*\"],\n  \"ignore\": [\"**/__tests__/**\", \"*.test.js\", \"*.spec.js\"]\n},\n\"scripts\": { \n  // ... other scripts\n  \"watch:dev\": \"nodemon\"\n}Nodemon config contains settings related toWhich command to run whenever a file changes, in our case npm run devWhat folders and files to watchAnd which files to ignoreMore about configuration of nodemon here.Now that we have our file watcher, you can now just run npm run watch:dev , code, and save your file. and whenever you go to localhost:3000 , you\u2019ll see the changes. Try it out!Bonus: Add tests!To add tests in our project, simply install Jest from npm, add a few config, and add a script called test in our package.jsonnpm i -D jestAdd an object called \u201cjest\u201d, and a test script in your package.json// package.json\n...\n\"jest\": { \n  \"testEnvironment\": \"node\"\n},\n\"scripts\": {\n  // ..other scripts \n  \"test\": \"jest\"\n}Try it out, make a file sample.test.js, write any tests, and run the script!npm run testSample Screenshot of running npm run test.TL;DRHere are the simplified steps for how to enable ES6 in Node.js. I\u2019ll also include the repo so you can copy and inspect the whole code.Make a new project using express your-project-name terminal command.Move the bin/, routes/ and app into a new folder called src/ , and convert the code into ES6. Also don\u2019t forget to rename bin/www to www.jsInstall all the dependencies and devDependenciesnpm i npm-run-all @babel/cli @babel/core @babel/preset-env nodemon rimraf --save\nnpm i -D jestAdd these scripts to your package.json\"scripts\": { \n  \"start\": \"npm run prod\", \n  \"build\": \"npm-run-all clean transpile\", \n  \"server\": \"node ./dist-server/bin/www\", \n  \"dev\": \"NODE_ENV=development npm-run-all build server\", \n  \"prod\": \"NODE_ENV=production npm-run-all build server\", \n  \"transpile\": \"babel ./server --out-dir dist-server\", \n  \"clean\": \"rimraf dist-server\", \n  \"watch:dev\": \"nodemon\", \n  \"test\": \"jest\" \n}Put configurations for babel, nodemon, and jest in your package.json\"nodemonConfig\": {\n  \"exec\": \"npm run dev\",\n  \"watch\": [ \"server/*\", \"public/*\" ],\n  \"ignore\": [ \"**/__tests__/**\", \"*.test.js\", \"*.spec.js\" ] \n}, \n\"babel\": { \n  \"presets\": [ \"@babel/preset-env\" ]\n},\n\"jest\": {\n  \"testEnvironment\": \"node\"\n},Test your scripts by running npm run your-script-hereYou\u2019ll see the complete repo at my githubNotes and disclaimersNote that this setup may not be proved ideal for all situations, specially for big projects. (like 1k files of code). Transpiling step and deleting might slow down your development environment. Plus, ES Modules, is almost coming to node. But, nevertheless, this is a good eductational material to understand how transipiling runs under the hood like when we are developing front-end apps :)ConclusionAll right! I hope you learned a lot. Thank you for reading this far.Happy Coding!Check the full repo here.This article is published in freeCodecamp news.? Twitter - ? freeCodeCamp - \u00a0? Portfolio - \u269b\ufe0f Github\n\n                        \n                    \n                    \n                        \n                        \n                    \n\n                    \n                    \n                        \n    \n\n\n\n\n\n    \n    \n\n\n                        \n\n\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. Get started\n    \n\n                    \n                \n                \n                    \n                \n            \n        ", "length": 15161, "excerpt": "Have you ever tried to write front-end apps using ES6 syntax, but then \u00a0when you\ndecided to learn back-end development with Node.js and Express, \u00a0you realized\nthat you can\u2019t use stuff like import from andexport default? \u00a0If so, you came to\nthe right place! This is step by step guide on how \u00a0to configure your dev and\nprod environments, setup scripts, and as a \u00a0bonus we\u2019ll learn how to add tests!\n\nTable of Contents / Summary of topics\n * How does it work?\n * Prerequisites\n * Installing express\n *", "siteName": "freeCodeCamp.org", "publishedTime": "2020-01-23T16:55:00.000Z", "id": "246c5fff9f39b08833abf971c061e4057367e755", "url": "https://www.freecodecamp.org/news/how-to-enable-es6-and-beyond-syntax-with-node-and-express-68d3e11fe1ab/", "domain": "freecodecamp.org", "date": "2023-12-27T18:07:05.084383", "resultUri": "http://localhost:3000/result/246c5fff9f39b08833abf971c061e4057367e755", "query": {"url": ["https://www.freecodecamp.org/news/how-to-enable-es6-and-beyond-syntax-with-node-and-express-68d3e11fe1ab/"]}, "meta": {"og": {"site_name": "freeCodeCamp.org", "type": "article", "title": "How to enable ES6 (and beyond) syntax with Node and Express", "description": "Have you ever tried to write front-end apps using ES6 syntax, but then \u00a0when you decided to learn back-end development with Node.js and Express, \u00a0you realized that you can\u2019t use stuff like import from andexport default? \u00a0If so, you came to the right place! This is step by step guide", "url": "https://www.freecodecamp.org/news/how-to-enable-es6-and-beyond-syntax-with-node-and-express-68d3e11fe1ab/", "image": "https://cdn-media-1.freecodecamp.org/images/1*VAo90seDRpFYq7utRkPEJg.png", "image:width": "800", "image:height": "571"}, "twitter": {"card": "summary_large_image", "title": "How to enable ES6 (and beyond) syntax with Node and Express", "description": "Have you ever tried to write front-end apps using ES6 syntax, but then \u00a0when you decided to learn back-end development with Node.js and Express, \u00a0you realized that you can\u2019t use stuff like import from andexport default? \u00a0If so, you came to the right place! This is step by step guide", "url": "https://www.freecodecamp.org/news/how-to-enable-es6-and-beyond-syntax-with-node-and-express-68d3e11fe1ab/", "image": "https://cdn-media-1.freecodecamp.org/images/1*VAo90seDRpFYq7utRkPEJg.png", "label1": "Written by", "data1": "Jonathan Cunanan", "label2": "Filed under", "data2": "JavaScript, Nodejs, Tech, Programming, Productivity", "site": "@freecodecamp", "creator": "@devJonathanC_"}}}