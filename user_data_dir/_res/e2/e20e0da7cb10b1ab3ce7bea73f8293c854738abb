{"title": "How to set up Jest and Enzyme to test React Native apps", "byline": "freeCodeCamp.org", "dir": null, "lang": "en", "content": "<div class=\"page\" id=\"readability-page-1\"><div id=\"site-main\">\n<article><h1>How to set up Jest and Enzyme to test React Native apps</h1>\n<section>\n<section data-test-label=\"post-content\">\n<p>by Sam Ollason</p><p>This short article shares my experiences setting up my testing environment to unit test React Native components with Jest and Enzyme.</p><h3 id=\"testing-tools-and-environment\">Testing tools and environment</h3><p>The first thing I learnt was the approach and infrastructure for writing unit tests for a React Native app are very similar to writing unit tests for a React app\u2026perhaps unsurprisingly.</p><p>However, while the tooling and the use of the test suites are very similar, the <strong>testing environment and infrastructure have to be set up in a slightly different way</strong>. This is essentially because React apps are designed to work with the DOM inside a browser whereas mobile apps don\u2019t target this data structure for rendering (they target actual \u2018native\u2019 modules that are on the mobile system instead).</p><h4 id=\"using-jest\">Using Jest</h4><p><a href=\"https://jestjs.io/\" rel=\"noopener\">Jest</a> is a library used for testing JavaScript apps.</p><p>I wanted to use Jest for several reasons:</p><p>Firstly, it was created and is actively maintained by Facebook for their own React Native apps.</p><p>Secondly, it comes pre-packaged with the version of React Native I was working with (created using <a href=\"https://github.com/facebook/react-native\" rel=\"noopener\">react-native</a>).</p><p>Thirdly, <strong>Jest is a \u2018comprehensive\u2019 testing framework</strong> and contains the whole suite of testing tools I needed. For example, Jest comes with a library to check assertions, a test runner to actually run tests and tools to check code coverage. With other solutions, one has to choose and assemble individual components of a testing suite.</p><h4 id=\"using-jest-enzyme\">Using Jest + Enzyme</h4><p>I wanted to combine Jest and Enzyme. There are lots of slightly confusing comments on the web that compare \u2018Jest versus Enzyme\u2019. This is a bit misleading. While Jest is a testing framework you can think of Enzyme as a library that makes it easier to select and query elements inside of an emulated DOM. So <strong>it is often used alongside Jest</strong> to make writing the logic of tests cleaner and easier to read.</p><p>Still confused? It\u2019s similar to how jQuery introduced a concise and clear syntax for querying and selecting elements in the DOM, whereas the syntax using vanilla JavaScript was (at least back when jQuery was first introduced) not as clear and easy to use. And people don\u2019t often compare \u2018jQuery versus JavaScript\u2019, unless they are comparing a particular way that the two approaches use to query and modify elements of the DOM.</p><p><em>Note:</em> you can use Jest without Enzyme (I believe Facebook does this) but Enzyme makes your tests a bit easier to create and read. From my perspective, combining Enzyme with Jest is about convenience.</p><h3 id=\"setting-up-jest-enzyme\">Setting up Jest + Enzyme</h3><p>I had to jump through some hoops to successfully setup Jest and Enzyme in my React Native environment.</p><p>Jest now comes included with React Native apps created using the \u2018react-native\u2019 tool. So I could use Jest out of the box. Wonderful!</p><p>But I ran into some problems trying to combine Enzyme with React Native using their <a href=\"https://airbnb.io/enzyme/docs/guides/react-native.html\" rel=\"noopener\">documentation</a>. I never quite got to the bottom of what was the underlying problem, but I kept getting \u2018modules not found\u2019 errors like this one <a href=\"https://github.com/facebook/react-native/issues/23943\" rel=\"noopener\">here</a>.</p><h4 id=\"a-solution\">A solution</h4><p>In the end I used a solution that essentially abstracts away some of the setup into a pre-packaged environment using the <a href=\"https://github.com/FormidableLabs/enzyme-matchers/tree/master/packages/jest-enzyme#readme\" rel=\"noopener\">jest-enzyme</a> library and then made sure the jest \u2018presets\u2019 was set to \u2018react-native\u2019 in my package.json.</p><p>I followed the instructions to install these libraries:</p><pre><code>npm install jest-environment-enzyme jest-enzyme enzyme-adapter-react-16 --save-dev</code></pre><p>Errors when I tried to run my tests also directed me to explicitly install these myself too:</p><pre><code>npm install --save-dev react-dom enzyme</code></pre><p>Here is what I had to manually add to package.json:</p><pre><code>// package.json before with react-native init\n\n{\n...\n   \"jest\": {\n       \"presets\": [\"react-native\"],\n     }\n...\n}\n\n// package.json after my manual changes:\n{\n...\n\n\"jest\": {\n       \"presets\": [\"react-native\"], // not clear in documentation!\n       \"setupTestFrameworkScriptFile\": \"jest-enzyme\",\n       \"testEnvironment\": \"enzyme\",\n       \"testEnvironmentOptions\": {\n           \"enzymeAdapter\": \"react16\"\n       }  \n   }\n...\n}</code></pre><p>You can see the repo <a href=\"https://github.com/SamOllason/jest-enzyme-config-for-react-native/blob/master/README.md\" rel=\"noopener\">here</a>.</p><p>Using the jest-enzyme library in this way worked easily for me and it also meant that I had a slightly cleaner setup. This is because the other approach (that I couldn\u2019t get to work, following the Enzyme documentation) would have meant I also had to set up and maintain a separate \u2018jest config\u2019 script.</p><h3 id=\"summary\">Summary</h3><p>Writing business logic inside of Jest+Enzyme tests for React Native seems to be exactly the same as writing tests for React using Jest+Enzyme. This means the examples and documentation online for React unit testing are easily transferrable, which is really useful. This is a great step towards the vision of web developers being able to easily transfer their skills to create cross-platform mobile apps.</p><p>However, for the ease-of-use in the \u2018test writing\u2019 phase, I paid the price when setting up the infrastructure and environment so that the various tools were compatible with my React Native ecosystem.</p><p>In addition, from coming across Github issues in this area, it seems like there are lots of small instabilities between React Native versions that makes it really hard to find out what is the underlying cause of an infrastructure problem like the ones I described above. But I suppose we can\u2019t have flexibility in such a fast-moving space as this without some challenges.</p><p><a href=\"https://github.com/SamOllason/jest-enzyme-config-for-react-native/blob/master/README.md\" rel=\"noopener\">Here</a> is the repo with my jest-enzyme setup with a few example tests.</p><p>I hope you found this interesting and useful! Please feel free to add any questions or comments below.</p>\n</section>\n<hr/>\n<p>\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. <a href=\"https://www.freecodecamp.org/learn/\" id=\"learn-to-code-cta\" rel=\"noopener noreferrer\" target=\"_blank\">Get started</a>\n</p>\n</section>\n</article>\n</div></div>", "textContent": "\n            \n                \n                \n                \n                    \n                \n                \n                    \n                            \nby Sam OllasonThis short article shares my experiences setting up my testing environment to unit test React Native components with Jest and Enzyme.Testing tools and environmentThe first thing I learnt was the approach and infrastructure for writing unit tests for a React Native app are very similar to writing unit tests for a React app\u2026perhaps unsurprisingly.However, while the tooling and the use of the test suites are very similar, the testing environment and infrastructure have to be set up in a slightly different way. This is essentially because React apps are designed to work with the DOM inside a browser whereas mobile apps don\u2019t target this data structure for rendering (they target actual \u2018native\u2019 modules that are on the mobile system instead).Using JestJest is a library used for testing JavaScript apps.I wanted to use Jest for several reasons:Firstly, it was created and is actively maintained by Facebook for their own React Native apps.Secondly, it comes pre-packaged with the version of React Native I was working with (created using react-native).Thirdly, Jest is a \u2018comprehensive\u2019 testing framework and contains the whole suite of testing tools I needed. For example, Jest comes with a library to check assertions, a test runner to actually run tests and tools to check code coverage. With other solutions, one has to choose and assemble individual components of a testing suite.Using Jest + EnzymeI wanted to combine Jest and Enzyme. There are lots of slightly confusing comments on the web that compare \u2018Jest versus Enzyme\u2019. This is a bit misleading. While Jest is a testing framework you can think of Enzyme as a library that makes it easier to select and query elements inside of an emulated DOM. So it is often used alongside Jest to make writing the logic of tests cleaner and easier to read.Still confused? It\u2019s similar to how jQuery introduced a concise and clear syntax for querying and selecting elements in the DOM, whereas the syntax using vanilla JavaScript was (at least back when jQuery was first introduced) not as clear and easy to use. And people don\u2019t often compare \u2018jQuery versus JavaScript\u2019, unless they are comparing a particular way that the two approaches use to query and modify elements of the DOM.Note: you can use Jest without Enzyme (I believe Facebook does this) but Enzyme makes your tests a bit easier to create and read. From my perspective, combining Enzyme with Jest is about convenience.Setting up Jest + EnzymeI had to jump through some hoops to successfully setup Jest and Enzyme in my React Native environment.Jest now comes included with React Native apps created using the \u2018react-native\u2019 tool. So I could use Jest out of the box. Wonderful!But I ran into some problems trying to combine Enzyme with React Native using their documentation. I never quite got to the bottom of what was the underlying problem, but I kept getting \u2018modules not found\u2019 errors like this one here.A solutionIn the end I used a solution that essentially abstracts away some of the setup into a pre-packaged environment using the jest-enzyme library and then made sure the jest \u2018presets\u2019 was set to \u2018react-native\u2019 in my package.json.I followed the instructions to install these libraries:npm install jest-environment-enzyme jest-enzyme enzyme-adapter-react-16 --save-devErrors when I tried to run my tests also directed me to explicitly install these myself too:npm install --save-dev react-dom enzymeHere is what I had to manually add to package.json:// package.json before with react-native init\n\n{\n...\n   \"jest\": {\n       \"presets\": [\"react-native\"],\n     }\n...\n}\n\n// package.json after my manual changes:\n{\n...\n\n\"jest\": {\n       \"presets\": [\"react-native\"], // not clear in documentation!\n       \"setupTestFrameworkScriptFile\": \"jest-enzyme\",\n       \"testEnvironment\": \"enzyme\",\n       \"testEnvironmentOptions\": {\n           \"enzymeAdapter\": \"react16\"\n       }  \n   }\n...\n}You can see the repo here.Using the jest-enzyme library in this way worked easily for me and it also meant that I had a slightly cleaner setup. This is because the other approach (that I couldn\u2019t get to work, following the Enzyme documentation) would have meant I also had to set up and maintain a separate \u2018jest config\u2019 script.SummaryWriting business logic inside of Jest+Enzyme tests for React Native seems to be exactly the same as writing tests for React using Jest+Enzyme. This means the examples and documentation online for React unit testing are easily transferrable, which is really useful. This is a great step towards the vision of web developers being able to easily transfer their skills to create cross-platform mobile apps.However, for the ease-of-use in the \u2018test writing\u2019 phase, I paid the price when setting up the infrastructure and environment so that the various tools were compatible with my React Native ecosystem.In addition, from coming across Github issues in this area, it seems like there are lots of small instabilities between React Native versions that makes it really hard to find out what is the underlying cause of an infrastructure problem like the ones I described above. But I suppose we can\u2019t have flexibility in such a fast-moving space as this without some challenges.Here is the repo with my jest-enzyme setup with a few example tests.I hope you found this interesting and useful! Please feel free to add any questions or comments below.\n\n                        \n                    \n                    \n\n                    \n                    \n                        \n    \n\n\n\n\n\n    \n    \n\n\n                        \n\n\n        Learn to code for free. freeCodeCamp's open source curriculum has helped more than 40,000 people get jobs as developers. Get started\n    \n\n                    \n                \n                \n                    \n                \n            \n        ", "length": 6010, "excerpt": "by Sam Ollason\n\nThis short article shares my experiences setting up my testing environment to\nunit test React Native components with Jest and Enzyme.\n\nPhoto by Neil Soni\n[https://unsplash.com/photos/6wdRuK7bVTE?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText] \non Unsplash\n[https://unsplash.com/search/photos/mobile-app?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText]\nTesting tools and environment\nThe first thing I learnt was the approach and infrastructure fo", "siteName": "freeCodeCamp.org", "publishedTime": "2019-05-20T07:55:33.000Z", "id": "e20e0da7cb10b1ab3ce7bea73f8293c854738abb", "url": "https://www.freecodecamp.org/news/setting-up-jest-enzyme-for-testing-react-native-40393ca04145/", "domain": "freecodecamp.org", "date": "2023-12-27T18:09:39.072989", "resultUri": "http://localhost:3000/result/e20e0da7cb10b1ab3ce7bea73f8293c854738abb", "query": {"url": ["https://www.freecodecamp.org/news/setting-up-jest-enzyme-for-testing-react-native-40393ca04145/"]}, "meta": {"og": {"site_name": "freeCodeCamp.org", "type": "article", "title": "How to set up Jest and Enzyme to test React Native apps", "description": "by Sam Ollason This short article shares my experiences setting up my testing environment to unit test React Native components with Jest and Enzyme. Photo by Neil Soni [https://unsplash.com/photos/6wdRuK7bVTE?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText]  on Unsplash [https://unsplash.com/search/photos/mobile-app?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText] Testing tools and environment The first thing I learnt was the approach and infrastructure fo", "url": "https://www.freecodecamp.org/news/setting-up-jest-enzyme-for-testing-react-native-40393ca04145/", "image": "https://cdn-media-1.freecodecamp.org/images/1*Ro5rChbmw1G4Cf5i2GAZJg.jpeg", "image:width": "800", "image:height": "1200"}, "twitter": {"card": "summary_large_image", "title": "How to set up Jest and Enzyme to test React Native apps", "description": "by Sam Ollason This short article shares my experiences setting up my testing environment to unit test React Native components with Jest and Enzyme. Photo by Neil Soni [https://unsplash.com/photos/6wdRuK7bVTE?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText]  on Unsplash [https://unsplash.com/search/photos/mobile-app?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText] Testing tools and environment The first thing I learnt was the approach and infrastructure fo", "url": "https://www.freecodecamp.org/news/setting-up-jest-enzyme-for-testing-react-native-40393ca04145/", "image": "https://cdn-media-1.freecodecamp.org/images/1*Ro5rChbmw1G4Cf5i2GAZJg.jpeg", "label1": "Written by", "data1": "freeCodeCamp.org", "label2": "Filed under", "data2": "React Native, Jest, Unit Testing, Tech, Programming", "site": "@freecodecamp"}}}